{\rtf1\ansi\ansicpg1252\cocoartf2821
\cocoatextscaling0\cocoaplatform0{\fonttbl\f0\fswiss\fcharset0 Helvetica;}
{\colortbl;\red255\green255\blue255;}
{\*\expandedcolortbl;;}
\margl1440\margr1440\vieww11520\viewh8400\viewkind0
\pard\tx720\tx1440\tx2160\tx2880\tx3600\tx4320\tx5040\tx5760\tx6480\tx7200\tx7920\tx8640\pardirnatural\partightenfactor0

\f0\fs24 \cf0 @startuml\
title UC5 Activity - Execute SQL and Fetch Data\
top to bottom direction\
skinparam dpi 220\
skinparam linetype ortho\
skinparam shadowing false\
skinparam roundcorner 12\
\
' =========================================================\
' TEXT DESCRIPTION (Numbered Steps)\
' Step 1: System receives validated SQL from the query generation module.\
' Step 2: System opens a connection to the Business Database.\
' Step 3: System applies execution limits such as timeout and row limits.\
' Step 4: System executes the SQL query on the database.\
' Step 5: System checks whether execution was successful.\
' Step 6: If successful, system returns the dataset.\
' Step 7: System writes an audit log with row count and latency.\
' Step 8: If execution fails, system returns an error message.\
' Step 9: System writes an audit log with error details.\
' =========================================================\
\
(*) --> "1. Receive validated SQL"\
--> "2. Open DB connection"\
--> "3. Apply execution limits\\n(timeout, row limit)"\
--> "4. Execute query on Business DB"\
\
if "5. Execution success?" then\
  -->[Yes] "6. Return dataset"\
  --> "7. Audit log (rows, latency)"\
  --> (*)\
else\
  -->[No] "8. Return execution error"\
  --> "9. Audit log (error)"\
  --> (*)\
endif\
\
@enduml}